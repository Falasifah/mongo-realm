<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Glassfish Mongo Realm by tmszdmsk</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Glassfish Mongo Realm</h1>
          <h2>MongoDB-backed realm for Glassfish</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/tmszdmsk/mongo-realm/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/tmszdmsk/mongo-realm/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/tmszdmsk/mongo-realm" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="mongodb-backed-realm-for-glassfish" class="anchor" href="#mongodb-backed-realm-for-glassfish"><span class="octicon octicon-link"></span></a>MongoDB-backed realm for Glassfish</h1>

<p>With Mongo-Realm you can store your users credentials directly in MongoDB with other data of your applicaton. Forget about setting up separate MySQL or LDAP server only for storing users data.</p>

<h2>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h2>

<ol>
<li>download mongo-realm jar and put it in your glassfish domains lib folder (i.e. <code>$GLASSFISH_HOME/glassfish/domains/$DOMAINNAME/lib/</code>)</li>
<li>
<p>at the end of <code>$GLASSFISH_HOME/glassfish/domains/$DOMAINNAME/config/login.conf</code> file paste:</p>

<pre><code>mongoRealm { 
 com.tadamski.glassfish.mongo.realm.MongoLoginModule required; 
};
</code></pre>
</li>
<li>
<p>create realm in glassfish using <code>asadmin</code> tool</p>

<pre><code>asadmin create-auth-realm --classname com.tadamski.glassfish.mongo.realm.MongoRealm --property jaas-context=mongoRealm $REALM_NAME
</code></pre>
</li>
<li>configure your applicaton to use newly created realm (in most cases few lines in <code>web.xml</code> will be enough)</li>
</ol><h2>
<a name="configuration" class="anchor" href="#configuration"><span class="octicon octicon-link"></span></a>Configuration</h2>

<p><strong>By default</strong>:</p>

<p>Mongo-Realm connects to <code>localhost</code> on <code>27017</code> and looks for data in <code>users</code> database in <code>users</code> collection. Informations about users are stored in separate documents [one user = one document]. Each document contains <code>login</code>, <code>password</code> simple string properties and <code>groups</code> with array of group names user belongs to. All passwords are hashed using <code>SHA-512</code> function.</p>

<p><strong>Custom configuration</strong>:</p>

<p>Of course defaults can be overriden. Simply add properties to realm created in 3rd step of <strong>Setup</strong>.</p>

<table>
<thead><tr>
<th>Property name</th>
<th>Default value</th>
</tr></thead>
<tbody>
<tr>
<td><strong>mongo.hostname</strong></td>
<td>localhost</td>
</tr>
<tr>
<td><strong>mongo.port</strong></td>
<td>27017</td>
</tr>
<tr>
<td><strong>mongo.db.name</strong></td>
<td>users</td>
</tr>
<tr>
<td><strong>mongo.collection.name</strong></td>
<td>users</td>
</tr>
<tr>
<td><strong>login.property</strong></td>
<td>login</td>
</tr>
<tr>
<td><strong>password.property</strong></td>
<td>password</td>
</tr>
<tr>
<td><strong>groups.property</strong></td>
<td>groups</td>
</tr>
<tr>
<td><strong>hash.function</strong></td>
<td>SHA-512</td>
</tr>
</tbody>
</table>
        </section>

        <footer>
          Glassfish Mongo Realm is maintained by <a href="https://github.com/tmszdmsk">tmszdmsk</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-140251-12");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>